

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Users Guide &mdash; Slurm-web 2.2.6 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Slurm-web 2.2.6 documentation" href="index.html"/>
        <link rel="next" title="Software architecture" href="architecture.html"/>
        <link rel="prev" title="Installation Guide" href="installation.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Slurm-web</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#download">Download</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Users Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dashboard-usage">Dashboard usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rest-api-cli-usage">REST API CLI usage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Software architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#authentication-roles">Authentication &amp; Roles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">REST API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#version">Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#login">Login</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#cluster">Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#racks">Racks</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#nodes">Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#jobs">Jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#partitions">Partitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#qos">QOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#reservations">Reservations</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#topology">Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#sinfo">Sinfo</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#jobs-by-node">Jobs by node</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#jobs-by-node-ids">Jobs by node ids</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#jobs-by-nodes">Jobs by nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#jobs-by-qos">Jobs by QOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#convert-nodeset">Convert Nodeset</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">How to contribute or add page</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contribute.html#code-style-and-coding-rules">Code style and coding rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="contribute.html#architecture-front">Architecture Front</a></li>
<li class="toctree-l2"><a class="reference internal" href="contribute.html#page-api">Page API</a></li>
<li class="toctree-l2"><a class="reference internal" href="contribute.html#work-with-current-page-or-add-new">Work with current page or add new:</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Slurm-web</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Users Guide</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/usage.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="users-guide">
<h1>Users Guide<a class="headerlink" href="#users-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="dashboard-usage">
<h2>Dashboard usage<a class="headerlink" href="#dashboard-usage" title="Permalink to this headline">¶</a></h2>
<p>To start using the web dashboard, first connect to this URL with a web browser
(where <em>server</em> is the network hostname of the server hosting the dashboard):
<a class="reference external" href="http://server/slurm/">http://server/slurm/</a></p>
<p>You should then arrive to the homepage of the web dashboard. It is the Jobs view
which looks like the following screenshot:</p>
<div class="figure">
<img alt="_images/screenshot_jobs_view.png" src="_images/screenshot_jobs_view.png" />
</div>
<p>In the top right corner of this web page, there is a menu with 10 entries:</p>
<div class="figure">
<img alt="_images/screenshot_menu.png" src="_images/screenshot_menu.png" />
</div>
<p>With these links, you can navigate to 9 differents views:</p>
<ul class="simple">
<li>the Jobs view</li>
<li>the Racks view</li>
<li>the JobsMap view</li>
<li>the 3D view (not available in IE)</li>
<li>the Partitions view</li>
<li>the QOS view</li>
<li>the Reservations view</li>
<li>the Gantt view</li>
<li>the Topology view</li>
</ul>
<p>All these views are described in details in the following sections.</p>
<p>The last entry concerns the user&#8217;s authentication. It is not displayed if this
feature is disabled.</p>
<div class="section" id="jobs-view">
<h3>Jobs view<a class="headerlink" href="#jobs-view" title="Permalink to this headline">¶</a></h3>
<p>The Jobs view gives an overview of all Slurm jobs currently running or pending
on the supercomputer.</p>
<p>At the top of this view, there are 5 pie charts. The biggest one on the left
represents the part of cores allocated to jobs among the total number of cores
available on the supercomputer.</p>
<p>Then, from left to right, the 4 other pie charts represent:</p>
<ol class="arabic simple">
<li>The distribution of allocated nodes among partitions</li>
<li>The distribution of allocated cores among partitions</li>
<li>The distribution of allocated nodes among QOS</li>
<li>The distribution of allocated cores among QOS</li>
</ol>
<p>Note that the last 4 charts only consider currently allocated resources. So, if
there is only one running job on only one core, all these charts will show one
partition and one QOS at 100%, even though the vast majority of the resources
are idle. These diagrams become really relevant when you have multiple QOS and
partitions and there are many running jobs.</p>
<p>Then, after the charts, there is a table with one job per row. This is the list
of all jobs running or pending on the system.</p>
<p>There are 9 columns:</p>
<ol class="arabic simple">
<li>The Slurm job ID</li>
<li>The name of the user with his/her login on the system between parenthesis</li>
<li>The number of cores and nodes that are allocated for this job, if any. If the
job is pending or blocked for any reason, the field could be empty since Slurm
may have not decided yet on which nodes this job will run.</li>
<li>The current state of the job</li>
<li>If the job is pending or blocked, the reason which explains why the job is
in this state. If the job is running or completing, this field is empty.</li>
<li>The start time of the job if the job is pending and Slurm is able to forecast
its start time in the future.</li>
<li>The QOS of the job</li>
<li>The partition of the job</li>
<li>The Workload Characterization Key (WCKey) of the job</li>
<li>An optional customizable column if using the <tt class="docutils literal"><span class="pre">JOBS_XTRA_COL</span></tt> feature.
Please refer to the <a class="reference internal" href="installation.html"><em>Installation Guide</em></a> for more details.</li>
</ol>
<p>You can filter the displayed jobs by using the input above the table. All the
shown jobs then satisfy all the filters given in the input. There is an
autocompletion mechanism on all partitions, QoS, WCKey, Name, User, Nodes, State,
Start Time and End Time existing in the table. The filters field work in a
substractive way.</p>
<p>There is a special use case to filter by Start and End Time. You must begin the
filter by choosing the field Start Time with the word &#8220;start&#8221; or End Time with
the word &#8220;end&#8221;. Followed by a comparison operator &#8220;&lt;&#8221; or &#8220;&gt;&#8221;. At the end you
will add the time format you want.</p>
<dl class="docutils">
<dt>The options are :</dt>
<dd><ul class="first last simple">
<li>now (the current time), must be used alone</li>
<li>[number]y (years)</li>
<li>[number]M (months)</li>
<li>[number]w (weeks)</li>
<li>[number]d (days)</li>
<li>[number]h (hours)</li>
<li>[number]m (minutes)</li>
<li>[number]s (seconds)</li>
</ul>
</dd>
</dl>
<p>The options must be separated with &#8221;:&#8221;</p>
<p>The time format can be a positive or negative value &#8220;+&#8221; (default) or &#8220;-&#8220;</p>
<p>Examples :</p>
<p>&#8220;start &lt; 1h:10m&#8221; same as &#8220;start &lt; 0y:0M:0w:0d:1h:10m:0s&#8221; same as
&#8220;start &lt; +1h:10m&#8221;</p>
<p>The example show all the jobs who started 1 hour and 10 minutes ago from now.</p>
<p>Another special use case is the Nodes filter. You can filter by a single node or a complete nodeset.</p>
<p>The single node filter show the job who use this node. A complete nodeset show the jobs who use
one of the node in common.</p>
<p>Examples :</p>
<blockquote>
<div><p>pocn240 show the job who use the node 240</p>
<p>pocn[240-242, 260] show all the jobs who use the node 240, 241, 242 or 260</p>
</div></blockquote>
<p>To get more details about one specific job, you can click anywhere on the job
row:</p>
<div class="figure">
<img alt="_images/screenshot_job_open_details.png" src="_images/screenshot_job_open_details.png" />
</div>
<p>Once clicked, an information box shows up with all details:</p>
<div class="figure">
<img alt="_images/screenshot_job_details.png" src="_images/screenshot_job_details.png" />
</div>
<p>The job ID is reminded in the title of this information box. Then, the fields
are:</p>
<ol class="arabic simple">
<li>The name of the user, with his/her login between parenthesis</li>
<li>The current state of the job</li>
<li>If the job is pending or blocked, the reason which explains why the job is
in this state. If the job is running or completing, this field is empty.</li>
<li>The list of nodes that are allocated for this job, if any. If the job is
pending or blocked for any reason, the field could be empty since Slurm may
have not decided yet on which nodes this job will run. If the node list is
not empty, the number of nodes is given between parenthesis.</li>
<li>The number of requested (and eventually allocated) cores for the job</li>
<li>The Slurm account used for this job</li>
<li>The QOS of the job</li>
<li>The partition of the job</li>
<li>The Workload Characterization Key (WCKey) of the job</li>
<li>The exclusive flag whose value is <em>yes</em> or <em>no</em>, as requested by users at the
job submission. If <em>yes</em>, the job get exclusive to resources on allocated
nodes. That means that no other job could run on these nodes at the same time
even if this job does not allocate all cores of these nodes.</li>
<li>The command run in the batch step of the job. Generally, for batch jobs, this
is a submission script.</li>
<li>The start time of the job. If the job is pending or blocked, Slurm is not
always able to forecast this start time in the future so this field may be
empty.</li>
<li>The elligible time which is the moment when this job was accepted in the
scheduling queue of Slurm.</li>
<li>The end time of the job. It could be empty if the job is not started yet or
the walltime is not set.</li>
<li>The time limit of the job, in minutes. It may be empty if infinite.</li>
</ol>
<p>You can close this box by clicking on the <em>Close</em> button:</p>
<div class="figure">
<img alt="_images/screenshot_job_close_details.png" src="_images/screenshot_job_close_details.png" />
</div>
<p>The Jobs view now takes Slurm&#8217;s Private Data parameter into account. The
description can be found in <a class="reference external" href="https://slurm.schedmd.com/slurm.conf.html">Slurm</a>.
If <tt class="docutils literal"><span class="pre">jobs</span></tt> has been defined previously in Slurm configuration, regular users
can only see their own jobs whereas the superusers see all the jobs and guests
can see none.</p>
</div>
<div class="section" id="racks-view">
<h3>Racks view<a class="headerlink" href="#racks-view" title="Permalink to this headline">¶</a></h3>
<p>The Racks view shows the current status of all nodes in the supercomputer:</p>
<div class="figure">
<img alt="_images/screenshot_racks_view.png" src="_images/screenshot_racks_view.png" />
</div>
<p>The nodes are drawn in their corresponding racks, at their appropriate position
and scaled size. Each node is a rectangle in the rack. The name of the node is
written on the side of the rack.</p>
<p>The small LED in the upper left corner of the node gives its general status. If
the LED is green, the node is available to run jobs. If it is yellow, the node
is alive but disable in Slurm (<em>drained</em> or <em>draining</em>). Finally, if the LED is
red, the node is down according to Slurm.</p>
<p>Then, the color of node rectangle depends upon current job allocations. If all
the cores of the node are allocated, the color is dark blue. If only a subset
of all cores of the node are allocated, the color is light blue. If the node is
totally idle, the color stays grey.</p>
<p>A small legendary in a frame at the top right corner gives a recap of these
information.</p>
</div>
<div class="section" id="jobsmap-view">
<h3>JobsMap view<a class="headerlink" href="#jobsmap-view" title="Permalink to this headline">¶</a></h3>
<p>The JobMaps view gives more or less the same information then the Racks view
with more details about cores allocation:</p>
<div class="figure">
<img alt="_images/screenshot_jobsmap_view.png" src="_images/screenshot_jobsmap_view.png" />
</div>
<p>All available CPU cores are drawn within the nodes, each core is a small
rectangle. If a core is allocated to a job, the core is colored with a color
depending on the job ID. All cores allocated to a job have the same color.
However, note that due to limited number of colors, when there are a lot of
running jobs, 2 cores allocated to 2 different jobs could potentially have the
same color. With Private Date set for <tt class="docutils literal"><span class="pre">jobs</span></tt>, only current-user-related jobs
will be shown for regular users.</p>
<p>Again, a small legendary in a frame at the top right corner gives a recap of
these information.</p>
<p>To get more details about the activity on one specific node or core, you can
click on it.</p>
<p>Once clicked, an information box shows up with the same details about jobs, as
in the box about job of the Jobs view.</p>
</div>
<div class="section" id="d-view">
<h3>3D view<a class="headerlink" href="#d-view" title="Permalink to this headline">¶</a></h3>
<p>This view shows a representation in three dimensions of the HPC, according to
how it is defined in the <tt class="docutils literal"><span class="pre">racks.xml</span></tt> file.</p>
<p>As on the JobsMap view, it gives the activity on each core, showing the color
of the current processed job. Same effect of viewing restriction as JobsMap
view with Private Data <tt class="docutils literal"><span class="pre">jobs</span></tt> parameter is defined.</p>
<p>You can choose between 3 ways of visualization:</p>
<ul class="simple">
<li><em>Camera orbit</em>:
Change its angle by clicking and moving the mouse. Zoom in with a scroll up,
out with a scroll down.</li>
<li><em>Camera first person</em>:
Move the camera with the arrow keys. Change its angle by pointing the wished
direction with the mouse.</li>
<li><em>Pacman</em>:
A view with an automatically moving between racks.</li>
</ul>
</div>
<div class="section" id="partitions-view">
<h3>Partitions view<a class="headerlink" href="#partitions-view" title="Permalink to this headline">¶</a></h3>
<p>The Partitions view give the list of configured partitions in the supercomputer:</p>
<div class="figure">
<img alt="_images/screenshot_partitions.png" src="_images/screenshot_partitions.png" />
</div>
<p>The table has the following columns:</p>
<ol class="arabic simple">
<li>Name</li>
<li>Default (Yes or No)</li>
<li>Nodes</li>
<li>Number of Nodes</li>
<li>Number of CPUs</li>
</ol>
</div>
<div class="section" id="qos-view">
<h3>QOS view<a class="headerlink" href="#qos-view" title="Permalink to this headline">¶</a></h3>
<p>The QOS view gives the list of configured QOSes in the supercomputer:</p>
<div class="figure">
<img alt="_images/screenshot_qos.png" src="_images/screenshot_qos.png" />
</div>
<p>The table has the following columns:</p>
<ol class="arabic simple">
<li>Name</li>
<li>Priority</li>
<li>Walltime</li>
<li>Grp CPUs mins</li>
<li>Grp CPUs min in Running state</li>
<li>Grp CPUs</li>
<li>Grp Memory</li>
<li>Grp Nodes</li>
<li>Grp Submitted Jobs</li>
<li>Grp Walltime</li>
<li>Max CPU mins per Job</li>
<li>Max CPU mins for Running jobs</li>
<li>Max CPUs per Job</li>
<li>Max CPUs per User</li>
<li>Max Jobs per User</li>
<li>Max Nodes per Job</li>
<li>Max Nodes per User</li>
<li>Max Submitted Jobs per User</li>
<li>Preemption Mode</li>
<li>Preemption Grace Time</li>
</ol>
<p>Empty columns are hidden.</p>
</div>
<div class="section" id="reservations-view">
<h3>Reservations view<a class="headerlink" href="#reservations-view" title="Permalink to this headline">¶</a></h3>
<p>The Reservations view gives an overview of current and future reservations set
on the supercomputer:</p>
<div class="figure">
<img alt="_images/screenshot_resv_view.png" src="_images/screenshot_resv_view.png" />
</div>
<p>The table is composed of one row per reservation and 5 columns:</p>
<ol class="arabic simple">
<li>The reservation name</li>
<li>The list of users allowed to submit jobs in this reservation</li>
<li>The list of nodes allocated to this reservation</li>
<li>The start time of this reservation</li>
<li>The end time of this reservation</li>
</ol>
<p>This view, like Jobs View, can be applied with Slurm&#8217;s Private Data as well.
If <tt class="docutils literal"><span class="pre">reservations</span></tt> has been defined previously in
<a class="reference external" href="https://slurm.schedmd.com/slurm.conf.html">Slurm</a> configuration, regular
users are prevented from viewing others&#8217; reservations. Only admins are
allowed to consult all the reservations.</p>
</div>
<div class="section" id="gantt-view">
<h3>Gantt view<a class="headerlink" href="#gantt-view" title="Permalink to this headline">¶</a></h3>
<p>The Gantt view aims to show jobs running, completed or pending, divided up
according to either nodes or qos. These jobs are represented according to an
horizontal axis of time. Running jobs are drawn in blue, completed ones in
yellow, and pending ones in green. By clicking on a job you can display its
informations in a modal.</p>
<div class="figure">
<img alt="_images/screenshot_ganntt_view_nodes.png" src="_images/screenshot_ganntt_view_nodes.png" />
</div>
<div class="figure">
<img alt="_images/screenshot_ganntt_view_qos.png" src="_images/screenshot_ganntt_view_qos.png" />
</div>
<p>Only jobs of current user will be evaluated for regular users if <tt class="docutils literal"><span class="pre">jobs</span></tt>
has been defined in Private Data configuration.</p>
</div>
<div class="section" id="topology-view">
<h3>Topology view<a class="headerlink" href="#topology-view" title="Permalink to this headline">¶</a></h3>
<p>The Topology view shows the organization of slurm nodes according to how it is
defined in the configuration file <tt class="docutils literal"><span class="pre">`topology.conf`</span></tt> from Slurm. This
representation use a force graph. Nodes are grouped by nodesets. You can click
on a nodeset to see the connected nodes. When you click on a node, a modal is
opened and shows details about the current job running on the selected node.</p>
<div class="figure">
<img alt="_images/screenshot_topology_view.png" src="_images/screenshot_topology_view.png" />
</div>
</div>
</div>
<div class="section" id="rest-api-cli-usage">
<h2>REST API CLI usage<a class="headerlink" href="#rest-api-cli-usage" title="Permalink to this headline">¶</a></h2>
<p>It is possible to send requests to the REST API server component using CLI.</p>
<p>If authentication is disabled on the REST API server, CLI HTTP clients such as
<tt class="docutils literal"><span class="pre">curl</span></tt> can be directly employed. In this example, the jobs are retrieved in
JSON format on the REST API server <cite>api.cluster</cite>:</p>
<div class="highlight-sh"><div class="highlight"><pre>curl http://api.cluster/slurm-restapi/jobs
</pre></div>
</div>
<p>If authentication is enabled, the HTTP client must initially request a valid
token and provide it in the headers to the following requests. Here is an
example Python script, relying on the <a class="reference external" href="http://docs.python-requests.org">requests library</a>, to retrieve the
jobs on REST API server with authentication enabled:</p>
<div class="highlight-python"><div class="highlight"><pre> <span class="c">#!/usr/bin/env python</span>

<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">getpass</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c"># session must be used if there&#39;s network restriction</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">trust_env</span> <span class="o">=</span> <span class="bp">False</span>

<span class="c"># Replace localhost:cluster by URL:port</span>
<span class="n">baseUrl</span> <span class="o">=</span> <span class="s">&quot;https://api.cluster/slurm-restapi&quot;</span>

<span class="n">versionUrl</span> <span class="o">=</span> <span class="n">baseUrl</span> <span class="o">+</span> <span class="s">&quot;/version&quot;</span>
<span class="k">print</span> <span class="n">versionUrl</span>
<span class="n">versionResponse</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">versionUrl</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">print</span> <span class="n">versionResponse</span>
<span class="k">if</span> <span class="n">versionResponse</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">versionResponse</span><span class="o">.</span><span class="n">content</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">versionResponse</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>

<span class="n">loginUrl</span> <span class="o">=</span> <span class="n">baseUrl</span> <span class="o">+</span> <span class="s">&quot;/login&quot;</span>
<span class="n">login</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;username: &quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">login</span> <span class="o">!=</span> <span class="s">&#39;guest&#39;</span><span class="p">:</span>
    <span class="n">pswd</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s">&#39;Password:&#39;</span><span class="p">)</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;Accept&#39;</span><span class="p">:</span> <span class="s">&#39;application/json&#39;</span><span class="p">,</span> <span class="s">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s">&#39;application/json&#39;</span><span class="p">}</span>

<span class="k">if</span> <span class="n">login</span> <span class="o">==</span> <span class="s">&#39;guest&#39;</span><span class="p">:</span>
    <span class="n">loginResponse</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="n">loginUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;guest&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">})</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">loginResponse</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">loginUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="p">{</span>
                                 <span class="s">&#39;login&#39;</span><span class="p">:</span> <span class="n">login</span><span class="p">,</span> <span class="s">&#39;password&#39;</span><span class="p">:</span> <span class="n">pswd</span><span class="p">})</span>

<span class="k">if</span> <span class="n">loginResponse</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">loginResponse</span><span class="o">.</span><span class="n">content</span>
    <span class="n">userInfos</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">loginResponse</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
    <span class="n">authHeader</span> <span class="o">=</span> <span class="s">&quot;Bearer &quot;</span> <span class="o">+</span> <span class="n">userInfos</span><span class="p">[</span><span class="s">&#39;id_token&#39;</span><span class="p">]</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;Accept&#39;</span><span class="p">:</span> <span class="s">&#39;application/json&#39;</span><span class="p">,</span>
               <span class="s">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s">&#39;application/json&#39;</span><span class="p">,</span> <span class="s">&#39;Authorization&#39;</span><span class="p">:</span> <span class="n">authHeader</span><span class="p">}</span>
    <span class="n">jobsUrl</span> <span class="o">=</span> <span class="n">baseUrl</span> <span class="o">+</span> <span class="s">&quot;/jobs&quot;</span>
    <span class="n">jobsResponse</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">jobsUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">jobsResponse</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">jobsResponse</span><span class="o">.</span><span class="n">content</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">jobsResponse</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c"># If response code is not ok, print the resulting http error code with</span>
    <span class="c"># description</span>
    <span class="n">loginResponse</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
</pre></div>
</div>
<p>Edit the <tt class="docutils literal"><span class="pre">baseUrl</span></tt> variable with the correct URL to the REST API server.</p>
<p>The Python script prompts the user for its login and password then request for
a valid token to retrieve. Once retrieved, the token is added into the headers
of the HTTP request to get the jobs in JSON format.</p>
<p>Please note this script does not properly check the SSL certicate on the REST
API server when using the HTTPS protocol. This script is provided as an example
and must not be used in production.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="architecture.html" class="btn btn-neutral float-right" title="Software architecture"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral" title="Installation Guide"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2020, EDF CCN-HPC.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.2.6',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>