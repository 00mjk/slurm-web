

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation Guide &mdash; Slurm-web 1.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Slurm-web 1.1 documentation" href="index.html"/>
        <link rel="next" title="Dashboard usage" href="usage.html"/>
        <link rel="prev" title="Introduction" href="introduction.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Slurm-web</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#download">Download</a></li>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Dashboard usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="usage.html#jobs-view">Jobs view</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#racks-view">Racks view</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#jobsmap-view">JobsMap view</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#partitions-view">Partitions view</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#qos-view">QOS view</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#reservations-view">Reservations view</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Software architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">REST API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#cluster">Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#racks">Racks</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#nodes">Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#jobs">Jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#reservations">Reservations</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Slurm-web</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Installation Guide</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/installation.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="installation-guide">
<h1>Installation Guide<a class="headerlink" href="#installation-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="download">
<h2>Download<a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h2>
<div class="section" id="source-code">
<h3>Source code<a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h3>
<p>The source code of Slurm-web is hosted on GitHub at this URL:
<a class="reference external" href="https://github.com/edf-hpc/slurm-web">https://github.com/edf-hpc/slurm-web</a></p>
<p>You can download latest version of this source code by clone the Git repository:</p>
<div class="highlight-python"><div class="highlight"><pre>git clone https://github.com/edf-hpc/slurm-web.git
</pre></div>
</div>
</div>
<div class="section" id="debian-packages">
<h3>Debian packages<a class="headerlink" href="#debian-packages" title="Permalink to this headline">¶</a></h3>
<p>We are currently thinking about providing pre-built Debian packages for
Slurm-web ready to download and install. For the moment, you will have to build
these packages by yourself from the source.</p>
<p>On a Debian based system with all build dependencies installed, run the
following command (or any similar) to build the binary packages:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">debuild</span> <span class="o">-</span><span class="n">us</span> <span class="o">-</span><span class="n">uc</span>
</pre></div>
</div>
<p>The packages should build properly, then you can add them to your own internal
Debian repository.</p>
</div>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>For the moment, Slurm-web is developed as a native Debian package. This means it
is very easy to install it and configure it on Debian based GNU/Linux
distributions (eg. Ubuntu).</p>
<p>However, the drawback is that it becomes much harder to install it on others
RPM based GNU/Linux distributions (such as RHEL, Centos, Fedora, and so on).
If you want to improve the situation on these distributions, please contact us.</p>
<p>The backend API depends on the following libraries:</p>
<ul class="simple">
<li><a class="reference external" href="http://flask.pocoo.org/">Flask</a> web framework,</li>
<li><a class="reference external" href="http://www.gingergeeks.co.uk/pyslurm/">PySLURM</a>, the python binding to Slurm C libraries,</li>
<li><a class="reference external" href="http://cea-hpc.github.io/clustershell/">ClusterShell</a> , a distributed shell with nodeset manipulation Python library</li>
</ul>
<p>The dashboard has the following dependencies:</p>
<ul class="simple">
<li><cite>bootstrap</cite>, the responsive HTML, JS and CSS framework,</li>
<li><a class="reference external" href="https://jquery.com/">jQuery</a> JS library,</li>
<li><a class="reference external" href="http://www.flotcharts.org/">Flot</a>, a jQuery extension for drawing charts.</li>
</ul>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="from-source">
<h3>From source<a class="headerlink" href="#from-source" title="Permalink to this headline">¶</a></h3>
<p>Not supported yet. Please contact us if you want to improve this part.</p>
</div>
<div class="section" id="distributions">
<h3>Distributions<a class="headerlink" href="#distributions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="debian-ubuntu">
<h4>Debian/Ubuntu<a class="headerlink" href="#debian-ubuntu" title="Permalink to this headline">¶</a></h4>
<p>Once the binary packages of Slurm-web are in your internal Debian repository, simply
install these packages with the following command:</p>
<div class="highlight-python"><div class="highlight"><pre>apt-get install slurm-web-restapi slurm-web-dashboard
</pre></div>
</div>
</div>
<div class="section" id="rhel-centos">
<h4>RHEL/Centos<a class="headerlink" href="#rhel-centos" title="Permalink to this headline">¶</a></h4>
<p>Not supported yet. Please contact us if you want to improve this part.</p>
</div>
</div>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>The configuration of Slurm-web is composed of only one file, an XML description
of your racks and nodes. The content and format of this file is explained in the
following sub-section.</p>
<div class="section" id="xml-racks-and-nodes-description">
<h3>XML racks and nodes description<a class="headerlink" href="#xml-racks-and-nodes-description" title="Permalink to this headline">¶</a></h3>
<p>Slurm does not provide sufficient information about the nodes and the racks
composing a supercomputer for representing it accurately with correct node sizes
and distribution over the racks. For this purpose, Slurm-web backend API relies
on an additional file located under the poath <tt class="docutils literal"><span class="pre">/etc/slurm-web/racks.xml</span></tt>.</p>
<p>This file must contain the complete description of your racks and nodes in XML
format. Here is an example of file:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE rackmap SYSTEM &quot;/usr/share/slurm-web/restapi/schema/dtd/racks.dtd&quot;&gt;</span>
<span class="nt">&lt;rackmap&gt;</span>

  <span class="nt">&lt;nodetypes&gt;</span>
    <span class="nt">&lt;nodetype</span> <span class="na">id=</span><span class="s">&quot;m32x4321&quot;</span> <span class="na">model=</span><span class="s">&quot;Vendor A 32 x4321&quot;</span> <span class="na">height=</span><span class="s">&quot;1&quot;</span> <span class="na">width=</span><span class="s">&quot;0.5&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;nodetype</span> <span class="na">id=</span><span class="s">&quot;b43&quot;</span> <span class="na">model=</span><span class="s">&quot;Vendor B 43&quot;</span> <span class="na">height=</span><span class="s">&quot;2&quot;</span> <span class="na">width=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/nodetypes&gt;</span>

  <span class="nt">&lt;racks&gt;</span>

    <span class="nt">&lt;rack</span> <span class="na">id=</span><span class="s">&quot;rack1&quot;</span> <span class="na">posx=</span><span class="s">&quot;0&quot;</span> <span class="na">posy=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;nodes&gt;</span>
        <span class="nt">&lt;node</span> <span class="na">id=</span><span class="s">&quot;cn001&quot;</span> <span class="na">type=</span><span class="s">&quot;m32x4321&quot;</span> <span class="na">posx=</span><span class="s">&quot;0&quot;</span> <span class="na">posy=</span><span class="s">&quot;3&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;node</span> <span class="na">id=</span><span class="s">&quot;cn002&quot;</span> <span class="na">type=</span><span class="s">&quot;m32x4321&quot;</span> <span class="na">posx=</span><span class="s">&quot;0.5&quot;</span> <span class="na">posy=</span><span class="s">&quot;3&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;node</span> <span class="na">id=</span><span class="s">&quot;cn003&quot;</span> <span class="na">type=</span><span class="s">&quot;m32x4321&quot;</span> <span class="na">posx=</span><span class="s">&quot;0&quot;</span> <span class="na">posy=</span><span class="s">&quot;4&quot;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;nodeset</span> <span class="na">id=</span><span class="s">&quot;cn[004-072]&quot;</span> <span class="na">type=</span><span class="s">&quot;m32x4321&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/nodes&gt;</span>
    <span class="nt">&lt;/rack&gt;</span>

    <span class="nt">&lt;rack</span> <span class="na">id=</span><span class="s">&quot;rack2&quot;</span> <span class="na">posx=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;nodes&gt;</span>
        <span class="nt">&lt;node</span> <span class="na">id=</span><span class="s">&quot;cn101&quot;</span> <span class="na">type=</span><span class="s">&quot;m32x4321&quot;</span> <span class="na">posx=</span><span class="s">&quot;0&quot;</span> <span class="na">posy=</span><span class="s">&quot;3&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;nodeset</span> <span class="na">id=</span><span class="s">&quot;cn[102-021]&quot;</span> <span class="na">type=</span><span class="s">&quot;m32x4321&quot;</span> <span class="na">posy=</span><span class="s">&quot;5&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/nodes&gt;</span>
    <span class="nt">&lt;/rack&gt;</span>

  <span class="nt">&lt;/racks&gt;</span>
<span class="nt">&lt;/rackmap&gt;</span>
</pre></div>
</div>
<p>The root element of the XML file <tt class="docutils literal"><span class="pre">&lt;rackmap&gt;</span></tt>. This root element must contain
2 elements: <tt class="docutils literal"><span class="pre">&lt;nodetypes&gt;</span></tt> and <tt class="docutils literal"><span class="pre">&lt;racks&gt;</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">&lt;nodetypes&gt;</span></tt> element contains the description of all types of nodes with
their models and sizes. Each type of node is described within a distinct
<tt class="docutils literal"><span class="pre">&lt;nodetype&gt;</span></tt> element with a unique ID (ex: <em>m32x4321</em>). This ID will be later
used as a reference of type for nodes. Each node type must have a
<tt class="docutils literal"><span class="pre">model</span></tt> attribute whose content is free text, a <tt class="docutils literal"><span class="pre">height</span></tt> and a <tt class="docutils literal"><span class="pre">width</span></tt>
whose values must be floats in U unit. For example, a node with a width of 0.5
uses half of rack width. With a height of 2, a node will uses 2 U in rack height.</p>
<p>The <tt class="docutils literal"><span class="pre">&lt;racks&gt;</span></tt> element contains the list of all racks composing the
supercomputer, each one being described in a distinct <tt class="docutils literal"><span class="pre">&lt;rack&gt;</span></tt> element. Each
rack element must have a unique ID which will be then used as rack name. A rack
must have a position, within <tt class="docutils literal"><span class="pre">posx</span></tt> and <tt class="docutils literal"><span class="pre">posy</span></tt> elements. These elements
must be integer, they represent the rack position within a grid with all racks.
If <tt class="docutils literal"><span class="pre">posx</span></tt> and <tt class="docutils literal"><span class="pre">posy</span></tt> attributes are skipped, then we assume they are equal
to <tt class="docutils literal"><span class="pre">0</span></tt>. Two racks should not have the same positions.</p>
<p>A rack contains a set of nodes within <tt class="docutils literal"><span class="pre">&lt;nodes&gt;</span></tt> element as shown in
the previous example. As usual, <tt class="docutils literal"><span class="pre">posx</span></tt> and <tt class="docutils literal"><span class="pre">posy</span></tt> attributes are assumed
to be equal to <tt class="docutils literal"><span class="pre">0</span></tt> if missing. Besides, <tt class="docutils literal"><span class="pre">&lt;nodeset&gt;</span></tt> elements can have
an attribute <tt class="docutils literal"><span class="pre">draw</span></tt> which will tell in which direction Slurm-Web
will draw the nodes in the rack (<tt class="docutils literal"><span class="pre">up</span></tt> or <tt class="docutils literal"><span class="pre">down</span></tt>). When missing, it is
set to <tt class="docutils literal"><span class="pre">up</span></tt>.</p>
<p>Once you have completely described all the racks and nodes composing your
supercomputer, you can check the file format by validating it against the
provided DTD file with the following command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">xmllint</span> <span class="o">--</span><span class="n">valid</span> <span class="o">--</span><span class="n">noout</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">slurm</span><span class="o">-</span><span class="n">web</span><span class="o">/</span><span class="n">racks</span><span class="o">.</span><span class="n">xml</span>
</pre></div>
</div>
</div>
<div class="section" id="user-running-the-rest-api">
<h3>User running the REST API<a class="headerlink" href="#user-running-the-rest-api" title="Permalink to this headline">¶</a></h3>
<p>By default, the user running the REST API is set to <tt class="docutils literal"><span class="pre">www-data</span></tt> in
<tt class="docutils literal"><span class="pre">/etc/apache2/conf-available/slurm-web-restapi.conf</span></tt>. If some
resources in your Slurm cluster are accessible to only some of your
users, then Slurm-Web won&#8217;t show them. Using a user with enough
credentials will fix the problem. Usually, setting the user to <tt class="docutils literal"><span class="pre">slurm</span></tt>
(see <em>slurm.conf</em>) is enough.</p>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="usage.html" class="btn btn-neutral float-right" title="Dashboard usage"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Introduction"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, EDF CCN-HPC.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>